import{d as S,r as $,l as h,s as C,f as F,c as n,a,h as k,F as m,q as v,m as L,e as r,x as R,w as D,o as u,p as c,t as d,v as w,y as b,z as p,_ as N}from"./index-DmnE47O_.js";import{u as B}from"./student-B0sXVr-l.js";const O={class:"container"},z={class:"col-form-label col-sm-2"},E={key:0,style:{color:"red"}},T={key:0,class:"col-sm-10"},q=["onUpdate:modelValue"],P={key:1,class:"col-sm-10"},Z={class:"form-check form-check-inline"},G=["onUpdate:modelValue"],H={class:"form-check form-check-inline"},J=["onUpdate:modelValue"],K={key:2,class:"col-sm-10"},Q={class:"form-check form-check-inline"},W=["onUpdate:modelValue"],X={class:"form-check form-check-inline"},Y=["onUpdate:modelValue"],ee={key:3,class:"col-sm-10"},le=["onUpdate:modelValue"],te=["value"],se={key:4,class:"col-sm-10"},oe=["onUpdate:modelValue"],ae=["value"],ne={key:5,class:"col-sm-10"},ue=["onUpdate:modelValue","disabled"],re={value:"",disabled:""},ce=["value"],ie={key:6,class:"col-sm-10"},de=["onUpdate:modelValue","disabled"],me={value:"",disabled:""},ve=["value"],be={key:7,class:"col-sm-10"},pe=["onUpdate:modelValue"],_e={class:"form-check mb-3"},he={class:"form-check-label"},ke=S({__name:"subject",setup(fe){const i=B(),s=$({}),M=h(()=>(i.majorList||[]).map(o=>({value:o.name,label:o.name,id:o.id}))),f=o=>{if(!o)return null;const e=i.majorList.find(l=>l.name===o);return e?e.id:null},y=h(()=>{const o=f(s.value.专业);return o?(i.classList||[]).filter(e=>e.majorId===o).map(e=>({value:e.name,label:e.name})):[]}),x=h(()=>{const o=f(s.value.专业);return o?(i.teacherList||[]).filter(e=>e.majorId===o).map(e=>({value:e.name,label:e.name})):[]}),V=(o,e,l)=>o?e===0?`该专业暂无${l}数据`:`请选择${l}`:"请先选择专业";C(()=>s.value.专业,(o,e)=>{o!==e&&e!==void 0&&(s.value.所在班级="",s.value.导师="")});const g=()=>{i.form.forEach(o=>{s.value[o.label]=""}),s.value.isAgree=!1};F(()=>{g()});const A=o=>{if(!o.学生名字?.trim())return"【学生名字】不能为空";const e=Number(o.年龄);return o.年龄===""||isNaN(e)||e<0||e>50?"【年龄】必须是 0-50 之间的数字":["男","女"].includes(o.性别)?/^[A-Za-z0-9]+$/.test(o.学号)?/^\d{11}$/.test(o.电话号码)?o.专业?o.所在班级?o.导师?o.省份?o.城市?["是","不是"].includes(o.是否低保户)?null:"请选择【是否低保户】":"请选择【城市】":"请选择【省份】":"请选择【导师】":"请选择【所在班级】":"请选择【专业】":"【电话号码】必须是 11 位数字":"【学号】只能包含数字和字母":"请选择【性别】"},I=()=>{const o=A(s.value);if(o){alert(o);return}const e={...s.value};e.备注?.trim()||(e.备注="无"),e.紧急联系人?.trim()||(e.紧急联系人="无"),delete e.isAgree;const t=e.学生名字.charAt(0),_=e.性别,U=e.是否低保户;U==="是"?e.是否低保户="贫困生补助对象":U==="不是"&&(e.是否低保户=_==="女"?`富贵人家 - ${t}小姐`:`富贵人家 - ${t}公子`);const j=i.appendStudent(e);alert(j.msg),j.status==="success"&&g()};return(o,e)=>(u(),n("div",O,[e[10]||(e[10]=a("div",{class:"d-flex justify-content-between align-items-center mb-4 border-bottom pb-3"},[a("div",null,[a("h4",{class:"text-primary fw-bold mb-1"},[a("i",{class:"bi bi-grid-3x3-gap-fill me-2"}),k("欢迎每一位学子 ")]),a("small",{class:"text-muted"},"坚定完成党的18大方针")])],-1)),a("form",{onSubmit:e[1]||(e[1]=D(()=>{},["prevent"]))},[(u(!0),n(m,null,v(L(i).form,l=>(u(),n("div",{class:"mb-3 mt-3 row",key:l.label},[a("label",z,[["备注","紧急联系人"].includes(l.label)?c("",!0):(u(),n("span",E,"*")),k(" "+d(l.label)+": ",1)]),l.type==="text"?(u(),n("div",T,[r(a("input",{type:"text",class:"form-control","onUpdate:modelValue":t=>s.value[l.label]=t,placeholder:"请输入"},null,8,q),[[w,s.value[l.label]]])])):c("",!0),l.type==="from-checkbox"?(u(),n("div",P,[a("div",Z,[r(a("input",{"onUpdate:modelValue":t=>s.value[l.label]=t,type:"radio",value:"男",class:"form-check-input"},null,8,G),[[b,s.value[l.label]]]),e[2]||(e[2]=a("label",{class:"form-check-label"},"男",-1))]),a("div",H,[r(a("input",{"onUpdate:modelValue":t=>s.value[l.label]=t,type:"radio",value:"女",class:"form-check-input"},null,8,J),[[b,s.value[l.label]]]),e[3]||(e[3]=a("label",{class:"form-check-label"},"女",-1))])])):c("",!0),l.type==="subsidy-checkbox"?(u(),n("div",K,[a("div",Q,[r(a("input",{"onUpdate:modelValue":t=>s.value[l.label]=t,type:"radio",value:"是",class:"form-check-input"},null,8,W),[[b,s.value[l.label]]]),e[4]||(e[4]=a("label",{class:"form-check-label"},"是",-1))]),a("div",X,[r(a("input",{"onUpdate:modelValue":t=>s.value[l.label]=t,type:"radio",value:"不是",class:"form-check-input"},null,8,Y),[[b,s.value[l.label]]]),e[5]||(e[5]=a("label",{class:"form-check-label"},"不是",-1))])])):c("",!0),l.type==="menu"?(u(),n("div",ee,[r(a("select",{class:"form-select","onUpdate:modelValue":t=>s.value[l.label]=t},[e[6]||(e[6]=a("option",{value:"",disabled:""},"请选择",-1)),(u(!0),n(m,null,v(l.options,(t,_)=>(u(),n("option",{key:_,value:t.value},d(t.label),9,te))),128))],8,le),[[p,s.value[l.label]]])])):c("",!0),l.type==="link-menu-major"?(u(),n("div",se,[r(a("select",{class:"form-select","onUpdate:modelValue":t=>s.value[l.label]=t},[e[7]||(e[7]=a("option",{value:"",disabled:""},"请选择专业",-1)),(u(!0),n(m,null,v(M.value,t=>(u(),n("option",{key:t.id,value:t.value},d(t.label),9,ae))),128))],8,oe),[[p,s.value[l.label]]])])):c("",!0),l.type==="link-menu-class"?(u(),n("div",ne,[r(a("select",{class:"form-select","onUpdate:modelValue":t=>s.value[l.label]=t,disabled:!s.value.专业},[a("option",re,d(V(s.value.专业,y.value.length,"班级")),1),(u(!0),n(m,null,v(y.value,t=>(u(),n("option",{key:t.value,value:t.value},d(t.label),9,ce))),128))],8,ue),[[p,s.value[l.label]]])])):c("",!0),l.type==="link-menu-teacher"?(u(),n("div",ie,[r(a("select",{class:"form-select","onUpdate:modelValue":t=>s.value[l.label]=t,disabled:!s.value.专业},[a("option",me,d(V(s.value.专业,x.value.length,"导师")),1),(u(!0),n(m,null,v(x.value,t=>(u(),n("option",{key:t.value,value:t.value},d(t.label),9,ve))),128))],8,de),[[p,s.value[l.label]]])])):c("",!0),l.type==="textareas"?(u(),n("div",be,[r(a("textarea",{class:"form-control","onUpdate:modelValue":t=>s.value[l.label]=t,rows:"3"},null,8,pe),[[w,s.value[l.label]]])])):c("",!0)]))),128)),a("div",_e,[a("label",he,[r(a("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.isAgree=l)},null,512),[[R,s.value.isAgree]]),e[8]||(e[8]=k(" 同意入学申请 ",-1))])]),a("div",{class:"button-container"},[a("button",{onClick:I,type:"button",class:"btn btn-primary bt"},"保存")]),e[9]||(e[9]=a("div",{style:{height:"100px"}},null,-1))],32)]))}}),Ve=N(ke,[["__scopeId","data-v-467c4601"]]);export{Ve as default};
